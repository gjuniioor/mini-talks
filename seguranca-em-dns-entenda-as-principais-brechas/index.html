<!doctype html>
<html lang="pt-br">
	<head>
		<meta charset="utf-8">

		<link rel="shortcut icon" href="img/lampiaosec.png">
		<title>Segurança em DNS - Entenda as principais brechas :: @gjuniioor</title>

		<meta name="description" content="Apresentação sobre segurança em DNS, brechas no serviço e como ele pode ser usado fora da caixa">
		<meta name="author" content="gjuniioor">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<section>
						<h2>Segurança em DNS</h2>
						<h3>Entenda as principais brechas</h3>
						<br />
						<h3><a href="https://gjuniioor.github.io">@gjuniioor</a></h3>
					</section>
					<section>
						<h2>Sobre</h2>
						<ul>
							<li><a href="https://gjuniioor.github.io">gjuniioor.github.io</a></li>
							<div class="fragment">
								<li><a href="https://lampiaosec.github.io">LampiãoSec</a></li>
								<li><a href="http://raulhc.cc">Raul Hacker Club</a></li>
								<li><a href="http://phpba.com.br">PHPBA</a></li>
								<li><a href="https://bbht-br.github.io">Big Bang Hack Team</a></li>
								<li><a href="http://eofclub.com/">EndOfFile Fórum</a></li>
							</div>
						</ul>
					</section>
					<section>
						<h2>Objetivos</h2>
						<ul>
							<li>Entender um pouco sobre DNS</li>
							<li>Uso de DNS para subverter obstáculos</li>
							<li>Falhas que envolvem DNS</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h2>O que é ?</h2>
						<blockquote>
							<a href="https://gjuniioor.github.io/talks/dns-o-que-voce-precisa-saber/">DNS: O que você precisa saber</a>
						</blockquote>
					</section>
					<section>
						<h4>Domain Name System</h4>
						<h4>(sistema de nomes de domínio)</h4>
						<ul>
							<li>UDP</li>
							<li>Porta 53</li>
						</ul>
						<br /><br />
						<em>Importantíssimo para internet!</em>
					</section>
					<section>
						<h2>Hierarquia dos Servidores</h2>
						<ul>
							<li>Root</li>
							<li>TLD</li>
							<li>Autoritativos</li>
							<li>Recursivos (cache)</li>
						</ul>
					</section>
					<section>
						<h2>Zone Files</h2>
						<pre><code class="hljs" style="word-wrap: break-word;">$TTL	86400
$ORIGIN example.com.
@  1D  IN  SOA ns1.example.com. hostmaster.example.com. (
			      2002022401 ; serial
  			      3H ; refresh
  			      15 ; retry
  			      1w ; expire
 			      3h ; minimum
)
       IN  NS     ns1.example.com. ; in the domain
       IN  NS     ns2.smokeyjoe.com. ; external to domain
       IN  MX  10 mail.another.com. ; external mail provider
; server host definitions
ns1    IN  A      192.168.0.1  ;name server definition     
www    IN  A      192.168.0.2  ;web server definition
ftp    IN  CNAME  www.example.com.  ;ftp server definition
; non server domain hosts
bill   IN  A      192.168.0.3
fred   IN  A      192.168.0.4</code></pre>
						<a href="http://www.zytrax.com/books/dns/ch6/mydomain.html" target="_blank">Fonte: DNS For Rockets Scientists</a>
					</section>
				</section>
				<section>
					<section>
						<h2>DNS contornando obstáculos</h2>
					</section>
					<section>
						<h3>Bypasss de IDS em Information Gathering</h3>
						<pre><code class="hljs" style="word-wrap: break-word;">$ nmap -g 53 localhost</code></pre>
					</section>
				</section>
				<section>
					<section>
						<h2>DNS Tunnelling</h2>
					</section>
					<section>
						<h3>Funcionamento</h3>
						<img src="img/dns_tunneling_funcionamento.png" alt="Mapa de funcionamento do DNS Tunneling">
						<br />
						<a href="http://infosecinstitute.com" target="_blank">Fonte: InfoSec Institute</a>
					</section>
					<section>
						<h3>Utilidade</h3>
						<ul>
							<li>Bypass de proxy para tráfego comum</li>
							<li>Transferência de arquivos secretos</li>
							<li>SSH proxy</li>
							<li>Tráfego de C&C</li>
						</ul>
					</section>
					<section>
						<h3>Overview</h3>
						<ul>
							<li style="color: red;">Lento</li>
							<li style="color: blue;">Sempre aberto</li>
						</ul>
					</section>
					<section>
						<h3>Detecção</h3>
						<ul>
							<li>Tamanho das queries</li>
							<li>Quantidade de requisições TXT</li>
							<li>Quantidade de tráfego clienteX/servidorY</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h2>Falhas que envolvem DNS</h2>
					</section>
					<section>
						<h2>Overview</h2>
						<img src="img/data_flow.png" alt="Explicação do fluxo de dados e onde do serviço DNS e a classificação das falhas neles">
						<a href="http://www.zytrax.com/books/dns/" target="_blank">Fonte: DNS 4 Rockets Scientists</a>
					</section>
					<section>
						<h2>Classificação</h2>
						<ul>
							<li>Local (1)</li>
							<li>Server to server (2) & (3)</li>
							<li>Server to client (4) & (5)</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h2>Zone Transfer</h2>
					</section>
					<section>
						<h3>O que é:</h3>
						<ul>
							<li>
								<em>Atualização de zone files</em>
							</li>
							<li>Porta 53</li>
							<li>TCP</li>
						</ul>
					</section>
					<section>
						<h3>Modos:</h3>
						<ul>
							<li>AXFR</li>
							<li>IXFR</li>
						</ul>
					</section>
					<section>
						<h3>Possíveis vetores:</h3>
						<ul>
							<li>Slave server poisoning</li>
							<li style="color: red;">"Master" query</li>
						</ul>
					</section>
					<section>
						<h3>Criticidade</h3>
						<ul>
							<li>Essencial para propagar atualizações</li>
							<li style="color: red;">Vazar informações sensíveis</li>
							<li>Gerar tráfego ilegítimo (no caso de ataque "slave poisoning")</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h2>DNS Recursivo Aberto</h2>
					</section>
					<section>
						<h3>O que é</h3>
						<p>Lembra dos servidores recursivos?</p>
						<div>
							<h3>O que causa?</h3>
							<p>Ajuda em DDoS</p>
						</div>
					</section>
					<section>
						<h3>Funcionamento</h3>
						<p>DNS request com IP Spoofing</p>
						<p style="color:red;">Lembre-se: DNS usa UDP</p>
					</section>
					<section>
						<h3>Funcionamento</h3>
						<img src="img/ddos_attack.png" alt="Esquema para explicação do uso de DNS recursivo aberto para aplicação de DDoS">
						<br />
						<a href="http://www.cert.br/">Fonte: CERT Brasil</a>
					</section>
					<section>
						<h3>Agravante</h3>
						<ul>
							<li>Respostas grandes para perguntas curtas</li>
							<li>Lista de servidores abertos</li>
							<li>Uso de botnet</li>
						</ul>
					</section>
					<section>
						<h3>Consequências</h3>
						<p style="color: red;">Fortalecimento dos ataques de DDoS</p>
						<ul>
							<li>Pagar banda extra</li>
							<li>Servidor cair</li>
							<li>Ser multado</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h2>Obrigado!</h2>
						<h2>Perguntas ?</h2>
						<a href="https://gjunioor.github.io">@gjuniioor</a>
					</section>
					<section>
						<h2>Referências</h2>
						<ul>
							<li><a href="http://www.zytrax.com/books/dns/" target="_blank">DNS for Rocket Scientists</a></li>
							<li><a href="http://www.cert.br/" target="_blank">CERT.BR</a></li>
							<li><a href="http://resources.infosecinstitute.com/" target="_blank">InfoSec Institute</a></li>
							<li><a href="https://www.us-cert.gov/" target="_blank">US-CERT</a></li>
							<li><a href="https://www.cloudflare.com/" target="_blank">Cloudflare</a></li>
							<li>DNS & BIND, 5 th</li>
							<li>DNS & BIND Cookbook</li>
						</ul>
					</section>
				</section>
			</div>
		</div>

		<img src="img/lampiaosec.png" style="position:fixed;top:10px;right:10px;" />

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				transition: 'slide',
				slideNumber: true,
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});
		</script>
	</body>
</html>
